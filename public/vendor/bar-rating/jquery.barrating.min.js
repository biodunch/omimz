!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){var t=function(){function t(){var t=this,n=function(){var n=[t.options.wrapperClass];""!==t.options.theme&&n.push("br-theme-"+t.options.theme),t.$elem.wrap(e("<div />",{"class":n.join(" ")}))},r=function(){t.$elem.unwrap()},a=function(n){return e.isNumeric(n)&&(n=Math.floor(n)),e('option[value="'+n+'"]',t.$elem)},i=function(){var n=t.options.initialRating;return n?a(n):e("option:selected",t.$elem)},o=function(e){var n=t.$elem.data("barrating");return"undefined"!=typeof e?n[e]:n},s=function(e,n){null!==n&&"object"==typeof n?t.$elem.data("barrating",n):t.$elem.data("barrating")[e]=n},l=function(){var e=i(),n=e.val(),r=e.data("html")?e.data("html"):e.text();s(null,{userOptions:t.options,ratingValue:n,ratingText:r,originalRatingValue:n,originalRatingText:r,readOnly:t.options.readonly,ratingMade:!1})},u=function(){t.$elem.removeData("barrating")},c=function(){return o("ratingText")},d=function(){return o("ratingValue")},f=function(){var n=e("<div />",{"class":"br-widget"});return t.$elem.find("option").each(function(){var r,a,i,o;r=e(this).val(),r&&(a=e(this).text(),i=e(this).data("html"),i&&(a=i),o=e("<a />",{href:"#","data-rating-value":r,"data-rating-text":a,html:t.options.showValues?a:""}),n.append(o))}),t.options.showSelectedRating&&n.append(e("<div />",{text:"","class":"br-current-rating"})),t.options.reverse&&n.addClass("br-reverse"),t.options.readonly&&n.addClass("br-readonly"),n},g=function(){return o("userOptions").reverse?"nextAll":"prevAll"},p=function(e){a(e).prop("selected",!0),t.$elem.change()},h=function(){e("option",t.$elem).prop("selected",function(){return this.defaultSelected}),t.$elem.change()},b=function(e){e=e?e:c(),t.options.showSelectedRating&&t.$elem.parent().find(".br-current-rating").text(e)},v=function(){var n=t.$widget.find('a[data-rating-value="'+d()+'"]'),r=o("userOptions").initialRating;t.$widget.find("a").removeClass("br-selected br-current br-half"),n.addClass("br-selected br-current")[g()]().addClass("br-selected"),!o("ratingMade")&&e.isNumeric(r)&&e.isNumeric(d())&&r>d()&&n[o("userOptions").reverse?"prev":"next"]().addClass("br-half")},m=function(e){return t.options.deselectable?t.$elem.find("option:first").val()?!1:e.hasClass("br-current"):!1},$=function(n){n.on("click.barrating",function(r){var a,i,l=e(this),u=o("userOptions");return r.preventDefault(),n.removeClass("br-active br-selected br-half"),l.addClass("br-selected")[g()]().addClass("br-selected"),a=l.attr("data-rating-value"),i=l.attr("data-rating-text"),m(l)?(l.removeClass("br-selected br-current")[g()]().removeClass("br-selected br-current"),a="",i=""):(n.removeClass("br-current"),l.addClass("br-current")),s("ratingValue",a),s("ratingText",i),s("ratingMade",!0),p(a),b(i),u.onSelect.call(t,d(),c(),r),!1})},w=function(t){t.on("mouseenter.barrating",function(){var n=e(this);t.removeClass("br-active br-selected br-half"),n.addClass("br-active")[g()]().addClass("br-active"),b(n.attr("data-rating-text"))})},y=function(e){t.$widget.on("mouseleave.barrating blur.barrating",function(){e.removeClass("br-active"),b(),v()})},C=function(t){t.on("touchstart.barrating",function(t){t.preventDefault(),t.stopPropagation(),e(this).click()})},x=function(e){e.on("click.barrating",function(e){e.preventDefault()})},O=function(e){$(e),t.options.hoverState&&(w(e),y(e))},R=function(e){e.off(".barrating")},S=function(e){$elements=t.$widget.find("a"),C&&C($elements),e?(R($elements),x($elements)):O($elements)};this.show=function(){o()||(n(),l(),t.$widget=f(),t.$widget.insertAfter(t.$elem),v(),b(),S(t.options.readonly),t.$elem.hide())},this.readonly=function(e){"boolean"==typeof e&&o("readOnly")!=e&&(S(e),s("readOnly",e),t.$widget.toggleClass("br-readonly"))},this.set=function(e){var n=o("userOptions");t.$elem.find('option[value="'+e+'"]').val()&&(s("ratingValue",e),s("ratingText",t.$elem.find('option[value="'+e+'"]').text()),s("ratingMade",!0),p(d()),b(c()),v(),n.silent||n.onSelect.call(this,d(),c()))},this.clear=function(){var e=o("userOptions");s("ratingValue",o("originalRatingValue")),s("ratingText",o("originalRatingText")),s("ratingMade",!1),h(),b(c()),v(),e.onClear.call(this,d(),c())},this.destroy=function(){var e=d(),n=c(),a=o("userOptions");R(t.$widget.find("a")),t.$widget.remove(),u(),r(),t.$elem.show(),a.onDestroy.call(this,e,n)}}return t.prototype.init=function(t,n){return this.$elem=e(n),this.options=e.extend({},e.fn.barrating.defaults,t),this.options},t}();e.fn.barrating=function(n,r){return this.each(function(){var a=new t;if(e(this).is("select")||e.error("Sorry, this plugin only works with select fields."),a.hasOwnProperty(n)){if(a.init(r,this),"show"===n)return a.show(r);if(a.$elem.data("barrating"))return a.$widget=e(this).next(".br-widget"),a[n](r)}else{if("object"==typeof n||!n)return r=n,a.init(r,this),a.show();e.error("Method "+n+" does not exist on jQuery.barrating")}})},e.fn.barrating.defaults={theme:"",initialRating:null,showValues:!1,showSelectedRating:!0,deselectable:!0,reverse:!1,readonly:!1,fastClicks:!0,hoverState:!0,silent:!1,wrapperClass:"br-wrapper",onSelect:function(e,t,n){},onClear:function(e,t){},onDestroy:function(e,t){}},e.fn.barrating.BarRating=t});
//# sourceMappingURL=jquery.barrating.min.js.map